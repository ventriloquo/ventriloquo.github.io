<!doctype html><html lang=pt-br><meta content="text/html; charset=UTF-8"http-equiv=Content-Type><meta content=pt-br http-equiv=Content-Language><meta content="Agora a cria√ß√£o de posts √© semelhante ao Hugo."name=description><meta content=Tukain name=author><meta content=Lume name=generator><meta content="width=device-width,initial-scale=1"name=viewport><link href=/assets/fav.webp rel=icon type=image/webp><link href=/assets/css/styles.css rel=stylesheet><title>Automatizei o sistema de blogs do site</title><body><header><nav><input id=sidebar-active type=checkbox><label class=open-sidebar-button for=sidebar-active>Menu</label><div class=links-container><label class=close-sidebar-button for=sidebar-active>Fechar</label><a class=home-link href=/>in√≠cio</a><a href=/blog>blog</a><a href=/tutoriais>tutoriais</a><a href=/tags>tags</a><a href=/search>pesquisar</a><a href=/conversor>conversor</a></div></nav></header><main><div class=post data-pagefind-body><article><div class=center><div class=post-thumbnail><p class=center>üîß</div></div> 28/04/2024 <hgroup><h1>Automatizei o sistema de blogs do site</h1><p>Agora a cria√ß√£o de posts √© semelhante ao Hugo.</hgroup><hr><div class=post-content><p>Bom, isso √© uma coisa um pouco dif√≠cil de explicar (nem tanto na verdade), mas ainda assim, √© algo bacana de ser comentado.<h1>Como assim ‚ÄúAutomatizei‚Äù?</h1><p>Se voc√™ j√° usou o Hugo framework, ent√£o voc√™ sabe como que funciona o sistema de gera√ß√£o de posts para blogs. E pra quem nunca usou, aqui vai uma explica√ß√£o simples de como que funciona o processo (supondo que voc√™ j√° tenha uma pasta do site gerada e um tema configurado)<ol><li>Voc√™ digita <code class="language-plaintext highlighter-rouge">hugo new [pasta dos posts]/[nome do arquivo].md</code><li>Voc√™ abre o arquivo criado<li>Voc√™ escreve o post usando Mardown<li>Voc√™ digita <code class="language-plaintext highlighter-rouge">hugo</code><li>Pronto. O post foi gerado.</ol><p>A forma como o meu sistema de cria√ß√£o de posts funciona se assemelha um pouco com esse processo. A diferen√ßa fica nas ferramentas usadas e em como √© a estrutura das coisas.<h1>As ferramentas e estrutura</h1><p>O que eu estou usando para a gera√ß√£o de posts (e futuramente o rss deles), √© um programa chamado <a href=https://git.codemadness.org/saait>saait</a>. A forma como ele funciona lembra um pouco como o Hugo opera, mas a estrutura de pastas √© bem mais simples e o pr√≥prio programa n√£o faz muito al√©m de criar uma p√°gina com uma indexa√ß√£o de outras p√°ginas.<p>Basicamente, o saait serve apenas para criar uma p√°gina que lista outras p√°ginas. Por√©m, ele possui um sistema de templates, e isso √© o que muda tudo.<p>Todo e qualquer arquivo que voc√™ deseja criar utilizando as templates, tem que ser previamente montado na pasta de templates. A pasta de templates cont√©m pastas com o nome dos arquivos que voc√™ quer gerar (por exemplo: atom.xml), dentro delas, voc√™ cria 3 arquivos com a mesma extens√£o do arquivo (seguindo o exemplo acima: header.xml, footer.xml e item.xml).<p>Existem nomes de pastas que s√£o reservadas, como por exemplo a pasta page, que cont√©m as informa√ß√µes de como que um post deve ser estruturado.<p>Outra pasta que faz parte da estrutura√ß√£o da gera√ß√£o feita pelo saait √© a pages. Nela, voc√™ coloca seus posts, n√£o tendo a necessidade de escrever um arquivo html por completo, j√° que essa parte fica a cargo da template page.<p>Ainda dentro dessa pasta √© necess√°ria aten√ß√£o com uma coisa: cada post precisa de um arquivo de configura√ß√£o ([nome do arquivo].cfg), o nome do arquivo de configura√ß√£o precisa ter o mesmo nome que o arquivo html. Dentro desse arquivo de configura√ß√£o voc√™ coloca coisas como o nome do arquivo que ser√° gerado, o t√≠tulo da p√°gina, descri√ß√£o, data de cria√ß√£o e de modifica√ß√£o.<p>Uma pr√°tica que eu recomendo √© a de dar um prefixo num√©rico aos dois arquivos (por exemplo: 000-), isso far√° com que voc√™ consiga ordenar os posts por ordem num√©rica.<p>Outro programa que uso √© o <a href=https://git.codemadness.org/smu>smu</a>, esse √© bem mais simples de explicar.<p>Basicamente, o smu √© um programa que gera html a partir de um arquivo de markup similar ao markdown, sendo assim, √© poss√≠vel usa-lo como parte da gera√ß√£o dos posts, eliminando a necessidade de escrever html diretamente.<p>Por fim, o √∫ltimo programa que uso √© o <a href=https://git.codemadness.org/stagit>stagit</a>. Neste caso, eu o modifiquei para que a p√°gina gerada por ele se integrasse ao meu site, mas a funcionalidade dele √© a mesma.<p>O stagit √© dividido em duas partes: stagit e stagit-index. O stagit-index √© o respons√°vel por gerar a p√°gina inicial com a lista dos reposit√≥rios (essa sendo a parte que eu modifiquei para meu uso) e o stagit sendo o respons√°vel de gerar as p√°ginas de um reposit√≥rio espec√≠fico.<p>A forma como voc√™ usa os dois √© bem similar, mas existe uma diferen√ßa. No caso do stagit-index, voc√™ digita <code class="language-plaintext highlighter-rouge">stagit-index [reposit√≥rios]</code>, fazendo isso, ele criar√° um site que ir√° indexar os reposit√≥rios que voc√™ especificou com o comando na pasta atual.<p>Agora para que os reposit√≥rios listados tenham algum conte√∫do, √© necess√°rio que voc√™ crie pastas com os mesmos nomes dos reposit√≥rios que voc√™ indexou.<p>E √© a√≠ que o stagit entra em a√ß√£o. A cada uma das pastas, voc√™ deve digitar o comando <code class="language-plaintext highlighter-rouge">stagit [nome do reposit√≥rio respectivo]</code>.<p>Tendo feito essas duas etapas, voc√™ ter√° um site que te deixa visualizar reposit√≥rios.<h1>Certo, mas onde est√° a automa√ß√£o nisso?</h1><p>Agora √© que vem a parte boa.<p>Todo esse processo gera apenas arquivos html, voc√™ deve providenciar um arquivo CSS. Tendo isso feito, voc√™ pode scriptar todo o resto.<p>A forma que eu fa√ßo todo esse processo √© a partir de Makefiles e 1 script. As Makefiles ficam em cada pasta onde uma etapa do processo √© feita (a index dos posts, a index do stagit e cada reposit√≥rio), e o script que eu fiz serve para criar novos posts e em seguida atualizar o site.<p>Na cria√ß√£o de um novo post, voc√™ deve providenciar um nome para o post e uma descri√ß√£o, depois disso o seu editor de texto definido pela vari√°vel $EDITOR ser√° aberto em um arquivo tempor√°rio, onde ser√° escrito o post usando o markup do smu. Ao salvar e sair do arquivo, o post √© convertivo para html e posto na pasta pages, depois disso as Makefiles entram em a√ß√£o.<p>Os posts s√£o criados, ordenados e por fim, postos na pasta output, junto com o site git gerado pelo stagit-index+stagit.<p>Quando todo esse processo √© realizado, os arquivos dentro da pasta output s√£o movidos para o reposit√≥rio do meu site e em seguida s√£o postos no reposit√≥rio remoto do site, atualizando assim o site com um post novo.<h1><em>Fin</em></h1><p>Enfim, isso √© tudo o que eu tenho para falar hoje, agora eu vou preparar a gera√ß√£o do rss do site.<p>At√© o pr√≥ximo post!</div></article></div></main><footer><p>https://tukain.xyz/ ¬© Tukain, 2025.</footer>